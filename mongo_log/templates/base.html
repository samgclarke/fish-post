<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Fish Post</title>
    <!--<link href="{{ url_for('static', filename='bootstrap.min.css') }}" rel="stylesheet">-->
    <link href="//netdna.bootstrapcdn.com/bootswatch/3.0.0/readable/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='fishpost_style.css') }}" rel="stylesheet">
  </head>

  <body>
    {%- block topbar -%}
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <ul class="nav navbar-nav">
          <li class="active"><a href="/">Home</a></li>

          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Post Something <b class="caret"></b></a>
            <ul class="dropdown-menu">
              {% for type in ('post', 'video', 'image', 'link') %}
                  <li><a href="{{ url_for("admin.create", type=type) }}">{{ type|title }}</a></li>
              {% endfor %}
            </ul>
          </li>
          {% if g.user %}
            <li><a href="{{ url_for ("logout") }}">sign out</a></li>
          {% else %}
            <li><a href="{{ url_for ("login") }}">sign in</a></li>
          {% endif %}
        </ul>
      </div>
    </nav>
    {%- endblock -%}

    <div class="container">
      <div class="content">

        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <ul class="flashes">
            {% for message in messages %}
              <li>{{ message }}</li>
            {% endfor %}
            </ul>
          {% endif %}
        {% endwith %}

        {% block page_header %}{% endblock %}
        {% block content %}{% endblock %}
      </div>
    </div>
    {% block js_footer %}
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {

          var iframes = $("iframe");
          iframes.each(function() {
              var aspectRatio = this.height / this.width;
              var new_height = 640 * aspectRatio
              //console.log(aspectRatio);
              this.width = 640;
              this.height = new_height;
              //Fix z-index youtube video embedding
              var url = $(this).attr("src");
              var char = "?";
              if(url.indexOf("?") != -1){
                var char = "&";
              }
              $(this).attr("src",url+char+"wmode=transparent");
          });
          $("#videoPlayer").width = 640;
      });
    </script>
    {% endblock %}
  </body>
</html>